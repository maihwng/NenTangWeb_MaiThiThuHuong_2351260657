<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n l√Ω Sinh vi√™n</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    #thongBao {
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body class="bg-light">

  <div class="container py-5">
    <h2 class="mb-4 text-primary">üìã Qu·∫£n l√Ω Sinh vi√™n</h2>

    <!-- Th√¥ng b√°o -->
    <div id="thongBao" class="text-success mb-3"></div>

    <!-- Form -->
    <form id="formSV" class="row g-3">
      <div class="col-md-4">
        <label for="maSV" class="form-label">M√£ SV</label>
        <input type="text" class="form-control" id="maSV" required>
      </div>
      <div class="col-md-4">
        <label for="hoTen" class="form-label">H·ªç t√™n</label>
        <input type="text" class="form-control" id="hoTen" required>
      </div>
      <div class="col-md-4">
        <label for="ngaySinh" class="form-label">Ng√†y sinh</label>
        <input type="date" class="form-control" id="ngaySinh" required>
      </div>
      <div class="col-md-4">
        <label for="email" class="form-label">Email</label>
        <input type="email" class="form-control" id="email" required>
      </div>
      <div class="col-md-4">
        <label for="sdt" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
        <input type="text" class="form-control" id="sdt" required>
      </div>
      <div class="col-md-4">
        <label for="lop" class="form-label">L·ªõp</label>
        <input type="text" class="form-control" id="lop" required>
      </div>
      <div class="col-12">
        <button type="button" id="btnThem" class="btn btn-primary">Th√™m sinh vi√™n</button>
        <button type="button" id="btnCapNhat" class="btn btn-success d-none">C·∫≠p nh·∫≠t</button>
      </div>
    </form>

    <!-- B·∫£ng sinh vi√™n -->
    <div class="mt-5">
      <table class="table table-bordered table-striped">
        <thead class="table-dark">
          <tr>
            <th>M√£ SV</th>
            <th>H·ªç t√™n</th>
            <th>Ng√†y sinh</th>
            <th>Email</th>
            <th>SƒêT</th>
            <th>L·ªõp</th>
            <th>H√†nh ƒë·ªông</th>
          </tr>
        </thead>
        <tbody id="dsSinhVien">
          <!-- Sinh vi√™n s·∫Ω th√™m t·∫°i ƒë√¢y -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Script -->
  <script>
    const form = document.getElementById("formSV");
    const btnThem = document.getElementById("btnThem");
    const btnCapNhat = document.getElementById("btnCapNhat");
    const thongBaoDiv = document.getElementById("thongBao");
    const tbody = document.getElementById("dsSinhVien");

    let selectedRow = null;

    function thongBao(message, type = "success") {
      thongBaoDiv.innerText = message;
      thongBaoDiv.className = `text-${type}`;
      setTimeout(() => {
        thongBaoDiv.innerText = "";
      }, 3000);
    }

    btnThem.addEventListener("click", () => {
      const maSV = document.getElementById("maSV").value.trim();
      const hoTen = document.getElementById("hoTen").value.trim();
      const ngaySinh = document.getElementById("ngaySinh").value.trim();
      const email = document.getElementById("email").value.trim();
      const sdt = document.getElementById("sdt").value.trim();
      const lop = document.getElementById("lop").value.trim();

      // Ki·ªÉm tra d·ªØ li·ªáu
      if (!maSV || !hoTen || !ngaySinh || !email || !sdt || !lop) {
        thongBao("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.", "danger");
        return;
      }

      const emailRegex = /^\S+@\S+\.\S+$/;
      if (!emailRegex.test(email)) {
        thongBao("Email kh√¥ng h·ª£p l·ªá.", "danger");
        return;
      }

      const row = tbody.insertRow();
      row.insertCell(0).innerText = maSV;
      row.insertCell(1).innerText = hoTen;
      row.insertCell(2).innerText = ngaySinh;
      row.insertCell(3).innerText = email;
      row.insertCell(4).innerText = sdt;
      row.insertCell(5).innerText = lop;
      row.insertCell(6).innerHTML = `
        <button class="btn btn-warning btn-sm me-1" onclick="suaDong(this)">S·ª≠a</button>
        <button class="btn btn-danger btn-sm" onclick="xoaDong(this)">Xo√°</button>
      `;

      thongBao("Th√™m sinh vi√™n th√†nh c√¥ng!");
      form.reset();
    });

    function xoaDong(btn) {
      if (confirm("B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√°?")) {
        btn.parentElement.parentElement.remove();
        thongBao("Xo√° th√†nh c√¥ng!");
      }
    }

    function suaDong(btn) {
      selectedRow = btn.parentElement.parentElement;

      document.getElementById("maSV").value = selectedRow.cells[0].innerText;
      document.getElementById("hoTen").value = selectedRow.cells[1].innerText;
      document.getElementById("ngaySinh").value = selectedRow.cells[2].innerText;
      document.getElementById("email").value = selectedRow.cells[3].innerText;
      document.getElementById("sdt").value = selectedRow.cells[4].innerText;
      document.getElementById("lop").value = selectedRow.cells[5].innerText;

      btnThem.classList.add("d-none");
      btnCapNhat.classList.remove("d-none");
    }

    btnCapNhat.addEventListener("click", () => {
      const maSV = document.getElementById("maSV").value.trim();
      const hoTen = document.getElementById("hoTen").value.trim();
      const ngaySinh = document.getElementById("ngaySinh").value.trim();
      const email = document.getElementById("email").value.trim();
      const sdt = document.getElementById("sdt").value.trim();
      const lop = document.getElementById("lop").value.trim();

      if (!maSV || !hoTen || !ngaySinh || !email || !sdt || !lop) {
        thongBao("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin.", "danger");
        return;
      }

      const emailRegex = /^\S+@\S+\.\S+$/;
      if (!emailRegex.test(email)) {
        thongBao("Email kh√¥ng h·ª£p l·ªá.", "danger");
        return;
      }

      selectedRow.cells[0].innerText = maSV;
      selectedRow.cells[1].innerText = hoTen;
      selectedRow.cells[2].innerText = ngaySinh;
      selectedRow.cells[3].innerText = email;
      selectedRow.cells[4].innerText = sdt;
      selectedRow.cells[5].innerText = lop;

      thongBao("C·∫≠p nh·∫≠t th√†nh c√¥ng!");
      form.reset();
      btnThem.classList.remove("d-none");
      btnCapNhat.classList.add("d-none");
      selectedRow = null;
    });
  </script>

</body>
</html>
